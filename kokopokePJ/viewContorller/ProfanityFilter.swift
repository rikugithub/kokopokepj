//
//  ProfanityFilter.swift
//  kokopokePJ
//
//  Created by é‡‘æ¿±åˆ©æ¥ on 2020/01/17.
//  Copyright Â© 2020 Saki Nakayama. All rights reserved.
//

import Foundation

// Usage:
// yourLabel.text = ProfanityFilter.cleanUp("your string")

class ProfanityFilter: NSObject {
  
  /* Words from https://www.freewebheaders.com/full-list-of-bad-words-banned-by-google/ */
  
  static func cleanUp(_ string: String) -> Bool {
    let dirtyWords = "\\b(2g1c|2 girls 1 cup|ç•°å¸¸æ€§æ„›|è‚‰ä½“æ¬ ææ€§æ„›|ã‚¹ã‚«ãƒˆãƒ­|ãŠå°»|ã‚¢ãƒ‹ãƒªãƒ³ã‚°ã‚¹|è‚›é–€|ãŠå°»ã®ç©´|æš´è¨€|ã‚ªãƒŠãƒ‹ãƒ¼|ãƒã‚¹ã‚¿ãƒ¼ãƒ™ãƒ¼ã‚·ãƒ§ãƒ³|ãƒã‚¹ã‚¿ãƒ™|ç²¾æ¶²|å£è¼ª|ç‰å£æ·|é‡‘è¹´ã‚Š|ç‰èˆã‚|ç‰ã—ã‚ƒã¶ã‚Š|é‡‘ç‰|ã‚­ãƒ³ã‚¿ãƒ|ç©´å…„å¼Ÿ|ç”Ÿãƒãƒ¡|ãƒŒãƒ¼ãƒ‰|ç´ è£¸|å©šå¤–å­|éå«¡å‡ºå­|é­æ‰“ã¡|SMãƒ—ãƒ¬ã‚¤|äººç¨®å·®åˆ¥|ç£å§¦|ç†Ÿå¥³|ç—´å¥³|ãƒœã‚¤ãƒ³|è±Šèƒ¸|è±Šä¹³|é¦¬é¹¿|ãƒã‚«|è²æ“å¸¯|ãƒ“ãƒƒãƒ|å·¨æ ¹|ãƒ‡ã‚«ãƒãƒ³|é‡‘é«ªã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³|é‡‘é«ªã®ãƒ–ãƒ­ãƒ³ãƒ‰ã‚¢ã‚¯ã‚·ãƒ§ãƒ³|ãƒ•ã‚§ãƒ©ãƒã‚ª|ãƒ–ãƒ­ãƒ¼ã‚¸ãƒ§ãƒ–|ã‚ãªãŸã®è² è·ã‚’å¹ãé£›ã°ã™|ãƒ–ãƒ«ãƒ¼ãƒ¯ãƒƒãƒ•ãƒ«|ãƒ–ãƒ©ãƒ³ãƒ—ã‚­ãƒ³|å¡Š|ç·Šç¸›|ã°ã‹|ãŠã£ã±ã„|ãŠã£ã±ã„|æˆ¦åˆ©å“ã®å‘¼ã³å‡ºã—|èŒ¶è‰²ã®ã‚·ãƒ£ãƒ¯ãƒ¼|ãƒ–ãƒ«ãƒãƒƒãƒˆã‚¢ã‚¯ã‚·ãƒ§ãƒ³|ã¶ã£ã‹ã‘|ãƒ–ãƒ«ãƒ€ã‚¤ã‚¯|å¼¾ä¸¸ãƒã‚¤ãƒ–|ã§ãŸã‚‰ã‚|ãƒãƒ³ã‚°ãƒ›ãƒ¼ãƒ«|ç©´|å·¨ä¹³|ãŠå°»|ãŠå°»|ãŠå°»ã®ç©´|ãƒ©ã‚¯ãƒ€ã®ã¤ã¾å…ˆ|ã‚«ãƒ ã‚¬ãƒ¼ãƒ«|ã‚«ãƒ ã‚¹ãƒ©ãƒƒãƒˆ|ã‚«ãƒ ãƒ›ãƒ¼|ã‚«ãƒ¼ãƒšãƒƒãƒˆãƒãƒ³ãƒãƒ£ãƒ¼|ã˜ã‚…ã†ãŸã‚“|ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆãƒ­ãƒ¼ã‚ºãƒãƒƒãƒ‰|ã‚µãƒ¼ã‚¯ãƒ«ã‚¸ãƒ£ãƒ¼ã‚¯|ã‚¯ãƒªãƒ¼ãƒ–ãƒ©ãƒ³ãƒ‰æ±½èˆ¹|ã‚¯ãƒªãƒˆãƒªã‚¹|ã‚¯ãƒªãƒˆãƒªã‚¹|ã‚¯ãƒ­ãƒ¼ãƒãƒ¼ã‚¯ãƒ©ãƒ³ãƒ—|clusterfuck|ã‚³ãƒƒã‚¯|ã‚³ãƒƒã‚¯|ã‚³ãƒ—ãƒ­ãƒ©ã‚°ãƒ‹ã‚¢|ã‚³ãƒ—ãƒ­ãƒ•ã‚£ãƒªã‚¢|ã‚³ãƒ¼ãƒ³ãƒ›ãƒ¼ãƒ«|ã‚ã‚‰ã„ãã¾|ã‚ã‚‰ã„ãã¾|ä¸­å‡ºã—|ã”ã£ãã‚“|ã‚«ãƒŸãƒ³ã‚°|ã‚¯ãƒ³ãƒ‹ãƒªãƒ³ã‚°ã‚¹|å¥³æ€§å™¨|ãƒ€ãƒ¼ã‚­ãƒ¼|ãƒ‡ãƒ¼ãƒˆãƒ¬ã‚¤ãƒ—|ãƒ‡ã‚¤ãƒˆãƒ¬ã‚¤ãƒ—|ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¹ãƒ­ãƒ¼ãƒˆ|ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¹ãƒ­ãƒ¼ãƒˆ|ãƒ‡ãƒ³ãƒ‰ãƒ­ãƒ•ã‚£ãƒªã‚¢|ãƒšãƒ‹ã‚¹|ãƒ‡ã‚£ãƒ«ãƒ‰|ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ™ãƒªãƒ¼|ãƒ‡ã‚£ãƒ³ã‚°ãƒ«ãƒ™ãƒªãƒ¼|æ±šã„æ•|æ±šã„ã‚µãƒ³ãƒã‚§ã‚¹|ã‚ã‚“ã‚ã‚“ã‚¹ã‚¿ã‚¤ãƒ«|ã‚ã‚“ã‚ã‚“ã‚¹ã‚¿ã‚¤ãƒ«|å¾ŒèƒŒä½|å°çŠ¬ã‚¹ã‚¿ã‚¤ãƒ«|çŠ¬ã®ã‚¹ã‚¿ã‚¤ãƒ«|ãƒ‰ãƒ«ãƒã‚§ãƒƒãƒˆ|æ”¯é…|å¥³å¸|ãƒ‰ãƒ¼ãƒ |ãƒ­ãƒãƒ‘ãƒ³ãƒ|ãƒ€ãƒ–ãƒ«ãƒ‰ãƒ³|äºŒé‡æµ¸é€|dpã‚¢ã‚¯ã‚·ãƒ§ãƒ³|ãƒ‰ãƒ©ã‚¤ãƒãƒ³ãƒ—|dvda|ç§ã®ãŠå°»ã‚’é£Ÿã¹ã¾ã™|ã‚¨ãƒƒãƒ|å°„ç²¾|ã‚¨ãƒ­ãƒãƒƒã‚¯|ã‚¨ãƒ­ãƒ†ã‚£ã‚·ã‚ºãƒ |è­·è¡›|å®¦å®˜|ãƒ•ã‚¡ã‚´ãƒƒãƒˆ|ç³ä¾¿|ãƒ•ã‚§ãƒ«ãƒ|ãƒ•ã‚§ãƒ©ãƒã‚ª|ãƒ•ã‚§ãƒ«ãƒˆ|å¥³æ€§ã®æ½®å¹ã|å¥³ç‹æ§˜|ãƒ•ã‚£ã‚®ãƒ³ã‚°|ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒãƒ³|é‹æŒ‡|ãƒ•ã‚£ã‚¹ãƒ†ã‚£ãƒ³ã‚°|è¶³ãƒ•ã‚§ãƒ|è¶³ã‚³ã‚­|ãƒ•ãƒ­ãƒƒãƒ†ã‚£ãƒ³ã‚°|ãã|æ€§äº¤ãƒœã‚¿ãƒ³|ãƒ•ã‚¡ãƒƒã‚­ãƒ³|ã‚¯ã‚½|fucktards|ãƒ•ã‚¡ãƒƒã‚¸ãƒ‘ãƒƒã‚«ãƒ¼|ãƒ•ã‚¡ãƒƒã‚¸ãƒ‘ãƒƒã‚«ãƒ¼|ãµãŸãªã‚Š|ã‚®ãƒ£ãƒ³ã‚°ãƒãƒ³ã‚°|ã‚²ã‚¤ã‚»ãƒƒã‚¯ã‚¹|æ€§å™¨|å·¨æ ¹|ä¸Šã®å¥³ã®å­|ä¸Šã®å¥³ã®å­|é‡ç”Ÿã«ãªã£ãŸå¥³ã®å­|goatcx|ãƒ¤ã‚®|ã„ã¾ã„ã¾ã—ã„|ã‚´ãƒƒã‚¯ãƒ³|ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚·ãƒ£ãƒ¯ãƒ¼|ã†ã‚“|ã‚°ãƒ¼ã‚¬ãƒ¼ãƒ«|ã‚´ã‚¢ã‚¬ã‚ºãƒ |æ¨¡ç´¢|é›†å›£ã‚»ãƒƒã‚¯ã‚¹|gã‚¹ãƒãƒƒãƒˆ|ä¹è€|æ‰‹ä»•äº‹|æ‰‹ã‚³ã‚­|ãƒãƒ¼ãƒ‰ã‚³ã‚¢|ãƒãƒ¼ãƒ‰ã‚³ã‚¢|å¤‰æ…‹|åŒæ€§æ„›è€…ã®|ãƒ›ãƒ³ã‚­ãƒ¼|ãƒ•ãƒƒã‚«ãƒ¼|ç†±ã„ã‚«ãƒ¼ãƒ«|ç†±ã„ã²ã‚ˆã“|æ®ºã™æ–¹æ³•|æ®ºäººæ–¹æ³•|å·¨å¤§ãªè„‚è‚ª|é‡ã„ç‰©ã®é‹æ¬|è¿‘è¦ªç›¸å§¦|æ€§äº¤|ã‚¸ãƒ£ãƒƒã‚¯ã‚ªãƒ•|åˆ‘å‹™æ‰€ã®é¤Œ|ã‚¸ã‚§ã‚¤ãƒ«ãƒ™ã‚¤ãƒˆ|ã‚¼ãƒªãƒ¼ãƒ‰ãƒ¼ãƒŠãƒ„|è„±ã|ã‚¸ã‚¬ãƒ–ãƒ¼|ã‚¸ã‚¬ãƒ–ãƒ¼|ã‚¸ã‚¬ãƒ¼ãƒ–ãƒ¼|ç²¾æ¶²|ã‚¸ãƒ£ã‚°ã‚º|ã‚­ã‚±|ãã‚“ã°ã|ã‚­ãƒ³ã‚¯ã‚¹ã‚¿ãƒ¼|å¤‰æ…‹|ãƒãƒ–|é©æ‹˜æŸ|ãƒ¬ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¬ãƒ¼ãƒˆã‚¸ãƒ£ã‚±ãƒƒãƒˆ|ãƒ¬ãƒ¢ãƒ³ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼|ãƒ­ãƒªãƒ¼ã‚¿|ãƒ©ãƒ–ãƒ¡ã‚¤ã‚­ãƒ³ã‚°|é€£ã‚Œã¦ã£ã¦|ç”·æ€§æ½®å¹ã|è‡ªæ…°è¡Œç‚º|ãƒˆãƒ­ã‚¤ã‚’é£¼ã†|mf|ç†Ÿå¥³|å®£æ•™å¸«ã®åœ°ä½|mofo|ããã£ãŸã‚Œ|é‡‘æ˜Ÿã®ä¸˜|æ°ã®æ‰‹|ãƒãƒ•ãƒ€ã‚¤ãƒãƒ¼|ãƒãƒ•ãƒ€ã‚¤ãƒ“ãƒ³ã‚°|ãƒŠãƒ³ãƒ–ãƒ©|ãªã‚ã—|é»’äºº|ãƒã‚ªãƒŠã‚¸|ãƒ€ãƒ|é»’äºº|nig nog|ãƒ‹ãƒ³ãƒ•ã‚©ãƒãƒ‹ã‚¢|ä¹³é¦–|ä¹³é¦–|nsfwã‚¤ãƒ¡ãƒ¼ã‚¸|ãƒŒãƒ¼ãƒ‰|ãƒŒãƒ¼ãƒ‰|æ·«ä¹±ãª|æ·«ä¹±|ã‚¿ã‚³|ãŠã‚‚ã‚‰ã—|ãƒ¯ãƒ³ã‚«ãƒƒãƒ—äºŒäººã®å¥³ã®å­|ä¸€äººã®ç”·|ã‚ªãƒ¼ã‚¬ã‚ºãƒ |ä¹±äº¤|å°å…æ€§æ„›è€…|ãƒ‘ã‚­|ãƒ‘ãƒ³ãƒ†ã‚£ãƒ¼|ãƒ‘ãƒ³ãƒ†ã‚£ãƒ¼|ãƒšãƒ‰ãƒ™ã‚¢|å°å…æ€§æ„›è€…|ãƒšã‚®ãƒ³ã‚°|é™°èŒ|é›»è©±ã‚»ãƒƒã‚¯ã‚¹|ãŸã‚ã”ã¨|æ”¾å°¿|å°ä¾¿è±š|ãƒ”ã‚¹ãƒ”ãƒƒã‚°|ãƒ—ãƒ¬ã‚¤ãƒœãƒ¼ã‚¤|ãƒ—ãƒ¬ã‚¸ãƒ£ãƒ¼ãƒã‚§ã‚¹ãƒˆ|ãƒãƒ¼ãƒ«ã‚¹ãƒ¢ãƒ¼ã‚«ãƒ¼|ãƒãƒ‹ãƒ¼ãƒ—ãƒ¬ã‚¤|ã°ã‹|ãƒ—ãƒ¼ãƒ³|ãƒãƒ³ã‚¿ãƒ³|ãƒ—ãƒŠãƒ‹ãƒ¼|ã†ã‚“ã¡ã‚·ãƒ¥ãƒ¼ãƒˆ|ã†ã‚“ã¡|ãƒãƒ«ãƒ|ãƒãƒ«ãƒ|ãƒãƒ«ãƒ|ãƒ—ãƒªãƒ³ã‚¹ã‚¢ãƒ«ãƒãƒ¼ãƒˆãƒ”ã‚¢ã‚¹|pthc|é™°æ¯›|ãƒ—ãƒƒã‚·ãƒ¼|ã‚¯ã‚¨ãƒ•|ã‚¯ã‚£ãƒ¼ãƒ•|æ°—ã¾ãã‚Œ|ãƒ©ã‚°ãƒ˜ãƒƒãƒ‰|è’ã‚Œç‹‚ã†|ãƒ¬ã‚¤ãƒ—|å¼·å§¦|å¼·å§¦çŠ¯|ç›´è…¸|ãƒªãƒãƒ¼ã‚¹ã‚«ã‚¦ã‚¬ãƒ¼ãƒ«|ãƒªãƒ ã‚¸ãƒ§ãƒ–|ç¸å–ã‚Š|ãƒãƒ©è‰²ã®ãƒ¤ã‚·|ãƒãƒ©è‰²ã®ãƒ¤ã‚·ã¨å½¼å¥³ã®5äººã®å§‰å¦¹|ã•ã³ãŸãƒˆãƒ­ãƒ³ãƒœãƒ¼ãƒ³|ã‚µãƒ‡ã‚£ã‚ºãƒ |ã‚µãƒ³ãƒˆãƒ«ãƒ |ã‚¹ã‚­ãƒ£ãƒƒãƒˆ|ã‚·ãƒ¥ãƒ­ãƒ³|ã‚·ã‚¶ãƒªãƒ³ã‚°|ç²¾æ¶²|æ€§åˆ¥|æ€§åˆ¥|ã‚»ã‚¯ã‚·ãƒ¼|å‰ƒã£ãŸãƒ“ãƒ¼ãƒãƒ¼|å‰ƒã£ãŸãƒ—ãƒƒã‚·ãƒ¼|ã‚·ãƒ¼ãƒ¡ãƒ¼ãƒ«|ç¸›ã‚Š|ãŸã‚ã”ã¨|ãŸã‚ã”ã¨|ãã ã‚‰ãªã„|ã‚·ãƒ§ã‚¿|ãˆã³|ã‚¹ã‚­ãƒ¼ãƒˆ|æ–œã‚ç›®|ãµã—ã ã‚‰ãªå¥³|sï¼†m|ã‚¹ãƒãƒƒãƒˆ|ã‚¹ãƒŠãƒƒãƒ|é›ªã ã‚‹ã¾å¼|ã‚½ãƒ‰ãƒã‚¤ã‚º|ã‚½ãƒ‰ãƒŸãƒ¼|ã‚¹ãƒ‘ã‚¤ã‚¹|æ•£æ°´|ãƒ˜ãƒ©ã‚¸ã‚«|ã‚¹ãƒ—ãƒ¼ã‚¸|è¶³ã‚’åºƒã’ã‚‹|å‹‡æ°—|ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã‚ªãƒ³|ã‚¹ãƒˆãƒ©ãƒƒãƒ—ã‚ªãƒ³|ã‚¹ãƒˆãƒ©ãƒƒãƒ—ãƒ‘ãƒ‰|ã‚¹ãƒˆãƒªãƒƒãƒ—ã‚¯ãƒ©ãƒ–|ã‚¹ã‚¿ã‚¤ãƒ«çŠ¬|å¸ã†|å¸ã†|è‡ªæ®ºå°‘å¥³|è’¸ã—æš‘ã„å¥³æ€§|å|ã‚¹ã‚¤ãƒ³ã‚¬ãƒ¼|æ±šã‚Œãªãæ„›|ç§ã®å‘³|ãƒ†ã‚£ãƒ¼ãƒãƒƒã‚°|ä¸‰äººçµ„|ã®ã©|ç¸›ã‚‰ã‚ŒãŸ|ã‚¿ã‚¤ãƒˆãƒ›ãƒ¯ã‚¤ãƒˆ|ã‚·ã‚¸ãƒ¥ã‚¦ã‚«ãƒ©|ãŠã£ã±ã„|ãŠã£ã±ã„|ãŠã£ã±ã„|èˆŒ|ãƒˆãƒƒãƒ—ãƒ¬ã‚¹|æŠ•ã’ã‚‹|ã‚¿ã‚ªãƒ«ãƒ˜ãƒƒãƒ‰|ãƒˆãƒ©ãƒ³ã‚¸ã‚¹ã‚¿ãƒ©ã‚¸ã‚ª|ãƒˆãƒªãƒãƒ‡ã‚£ã‚ºãƒ |æµ´æ§½ã®å¥³ã®å­|æµ´æ§½|ã‚¿ãƒƒã‚·ãƒ¼|é™°éƒ¨|ã‚¤ã‚±ãƒ¡ãƒ³|ãƒˆã‚¥ã‚¤ãƒ³ã‚­ãƒ¼|äºŒäººã®å¥³ã®å­ä¸€æ¯|è„±è¡£|ã‚¢ãƒƒãƒ—ã‚¹ã‚«ãƒ¼ãƒˆ|å°¿é“éŠã³|å°¿æ¯’ç—‡|è†£|ãƒ“ãƒ¼ãƒŠã‚¹ãƒã‚¦ãƒ³ãƒ‰|ãƒã‚¤ãƒ–ãƒ¬ãƒ¼ã‚¿ãƒ¼|ç´«ã®æ–|ãƒœãƒ©ãƒ¬ãƒ•ã‚£ãƒªã‚¢|ç›—æ’®|å¤–é™°éƒ¨|ã‚ªãƒŠãƒ‹ãƒ¼|ã‚¦ã‚§ãƒƒãƒˆãƒãƒƒã‚¯|å¤¢ç²¾|ãƒ›ãƒ¯ã‚¤ãƒˆãƒ‘ãƒ¯ãƒ¼|ãƒ©ãƒƒãƒ”ãƒ³ã‚°ç”·æ€§|ã—ã‚ã®ãƒ’ãƒˆãƒ‡|xx|xxx|ã‚„ãŠã„|é»„è‰²ã®ã‚·ãƒ£ãƒ¯ãƒ¼|ã‚¤ãƒ¼ãƒ•ã‚£ãƒ¼|ç£å§¦|ğŸ–•)\\b"
    
    func matches(for regex: String, in text: String) -> [String] {
      
      do {
        let regex = try NSRegularExpression(pattern: regex)
        let results = regex.matches(in: text,
                                    range: NSRange(text.startIndex..., in: text))
        return results.compactMap {
          Range($0.range, in: text).map { String(text[$0]) }
        }
      } catch let error {
        print("invalid regex: \(error.localizedDescription)")
        return []
      }
    }
    
    let dirtyWordMatches = matches(for: dirtyWords, in: string)
    
    if dirtyWordMatches.count == 0 {
      return true   //ãƒãƒƒãƒã™ã‚‹æ–‡å­—ãŒãªã„
    } else {
                    //ãƒãƒƒãƒã™ã‚‹æ–‡å­—ãŒã‚ã‚‹
      var newString = string
      
      dirtyWordMatches.forEach({ dirtyWord in
        let newWord = String(repeating: "ğŸ˜²", count: dirtyWord.count)
        newString = newString.replacingOccurrences(of: dirtyWord, with: newWord, options: [.caseInsensitive])
      })
      
      return false
    }
  }
}
